<%- include("partials/header") %>
	<% if(current===1 && (featuredData.length>0)){ %>
<!-- carousel -->
<div class="container mt-2 mb-4">
	<h5 class="border-bottom fontSize">Featured</h5>
	<div id="carouselExampleCaptions" class="carousel slide rounded" data-ride="carousel">
		
	  <ol class="carousel-indicators">
		<% for(var i=y=0; i<featuredData.length && y < 3; i++){ %>
			<li data-target="#carouselExampleCaptions" data-slide-to="<% i %>" class="active"></li>
		  <% y++;%>
		<% } %>
	  </ol>
			<!-- First -->
	  <div class="carousel-inner">
		  <%  var carouselCount=0; (featuredData).forEach((element, index)=>{ %>
			  <% if(carouselCount < 3){ %>
				<div class="carousel-item">
				  <a href="/posts/<%= element.kababCasedTitle %>" class="stretched-link"><img src="<%= element.url %>" class="d-block w-100 objectFitClass" alt="Image"></a>
				  <div class="carousel-caption d-block">
					  <a href="/posts/<%= element.kababCasedTitle %>" class="stretched-link text-decoration-none text-white text-truncate"><h5><%= element.title %></h5></a>
					<p class="text-truncate"><%= element.shortDescription %></p>
				  </div>
				</div>
			  <% carouselCount++; } %>
		  <% }) %>
	  </div>

	  <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
		<span class="carousel-control-prev-icon" aria-hidden="true"></span>
		<span class="sr-only">Previous</span>
	  </a>
	  <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
		<span class="carousel-control-next-icon" aria-hidden="true"></span>
		<span class="sr-only">Next</span>
	  </a>
	</div>
</div>
<% } %>
<!-- <div class="container text-center my-1 d-block d-md-none">
	ad 1
</div>  -->

<div class="row flex-wrap container-fluid ml-0 justify-content-between align-items-center">
	
	<!-- ad -->
	<!-- <div class="col-md-2 d-none d-md-block text-center pl-md-0 my-1">
		ad 2
	</div> -->
	
		<!-- content -->
	<div class="col-md-8 mx-auto p-0">
			
		<div class="container">
			<h1 class="fontSize">Latest articles</h1>
			
			
			<% returnData.forEach((element)=>{ %>
				<div class="row row-cols-2 imageFadeClass">
					<div class="col-md-2 col-3 p-0">
						<img src="<%= element.url %>" class="w-100 rounded objectFitClass heightClassNewPosts" alt="Image">
					</div>
					<div class="col-md-10 col-9 p-25">
						<heading class="fontSize overflow-hidden"><%= element.title %></heading>
						<small class="d-block">Created on: <%= element.created.toDateString() %></small>
						<p class="text-truncate"><%= element.shortDescription %></p>
						<a href="/posts/<%= element.kababCasedTitle %>"><button type="button" class="btn btn-link stretched-link align-self-end">View more</button></a>
					</div>
				</div><hr>
			<% }); %>
			
		</div>
	</div>
	
		<!-- ad -->
	<!-- <div class="col-md-2 d-none d-md-block text-center pr-md-0 my-1">
		ad 5
	</div> -->
</div>
<!-- <div class="container text-center my-1 d-block d-md-none">
	ad 6
</div> -->

<nav aria-label="Page navigation">
    <% if (pages && pages > 0) { %>
    <ul class="pagination justify-content-center">
        <% if (current == 1) { %>
        <li class="page-item disabled"><a class="page-link">First</a></li>
        <% } else { %>
        <li><a class="page-link" href="/posts">First</a></li>
        <% } %>
 
        <% if (current == 1) { %>
        <li class="page-item disabled"><a class="page-link">«</a></li>
        <% } else { %>
        <li><a class="page-link" href="/posts?page=<%= Number(current) - 1 %>">«</a></li>
        <% } %>
 
        <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
        <% if (i !== 1) { %>
        <li class="page-item disabled"><a class="page-link">...</a></li>
        <% } %>
        <% for (; i <= (Number(current) + 4) && i <= pages; i++) { %>
        <% if (i == current) { %>
        <li class="active"><a class="page-link"><%= i %></a></li>
        <% } else { %>
        <li><a class="page-link" href="/posts?page=<%= i %>"><%= i %></a></li>
        <% } %>
        <% if (i == Number(current) + 4 && i < pages) { %>
        <li class="page-item disabled"><a class="page-link">...</a></li>
        <% } %>
        <% } %>
 
        <% if (current == pages) { %>
        <li class="page-item disabled"><a class="page-link">»</a></li>
        <% } else { %>
        <li><a class="page-link" href="/posts?page=<%= Number(current) + 1 %>">»</a></li>
        <% } %>
 
        <% if (current == pages) { %>
        <li class="page-item disabled"><a class="page-link">Last</a></li>
        <% } else { %>
        <li><a class="page-link" href="/posts?page=<%= pages %>">Last</a></li>
        <% } %>
    </ul>
    <% } %>
</nav>

<%- include("partials/footer") %>